<h1> ğŸŒ± ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê¸°ë³¸í¸</h1>

> ë‚´ìš© ì •ë¦¬

<details>
<summary>Table of Contents</summary>

- [IntelliJ ë‹¨ì¶•í‚¤ ì •ë¦¬](#intellij-ë‹¨ì¶•í‚¤-ì •ë¦¬)
- [1. íšŒì› ë„ë©”ì¸ ê°œë°œ](#1-íšŒì›-ë„ë©”ì¸-ê°œë°œ)
  - [`ì½”ë“œ1`ì˜ ë¬¸ì œì  ğŸ¤”](#ì½”ë“œ1ì˜-ë¬¸ì œì -)
  - [TIL ğŸ’¡](#til-)
- [2. íšŒì› ë„ë©”ì¸ ì‹¤í–‰ê³¼ í…ŒìŠ¤íŠ¸](#2-íšŒì›-ë„ë©”ì¸-ì‹¤í–‰ê³¼-í…ŒìŠ¤íŠ¸)
  - [ì• í”Œì¼€ì´ì…˜ ë¡œì§ì„ êµ¬í˜„ í›„ í…ŒìŠ¤íŠ¸](#ì• í”Œì¼€ì´ì…˜-ë¡œì§ì„-êµ¬í˜„-í›„-í…ŒìŠ¤íŠ¸)
  - [`JUnit`ì„ ì´ìš©í•´ì„œ í…ŒìŠ¤íŠ¸ â—ï¸](#junitì„-ì´ìš©í•´ì„œ-í…ŒìŠ¤íŠ¸-ï¸)
- [3. ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ê°œë°œ](#3-ì£¼ë¬¸ê³¼-í• ì¸-ë„ë©”ì¸-ê°œë°œ)
  - [`ì½”ë“œ2`ì˜ ì„¤ê³„](#ì½”ë“œ2ì˜-ì„¤ê³„)
- [4. ê´€ì‹¬ì‚¬ ë¶„ë¦¬](#4-ê´€ì‹¬ì‚¬-ë¶„ë¦¬)
  - [ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ 5ê°€ì§€ ì›ì¹™ì˜ ì ìš©](#ì¢‹ì€-ê°ì²´-ì§€í–¥-ì„¤ê³„ì˜-5ê°€ì§€-ì›ì¹™ì˜-ì ìš©)
    - [SRP(Single Responsiblilty Principle) ğŸ”—](#srpsingle-responsiblilty-principle-)
    - [DIP(Dependency Inversion Principle) ğŸ”—](#dipdependency-inversion-principle-)
    - [OCP(Open-Closed Prinicple) ğŸ”—](#ocpopen-closed-prinicple-)
  - [IoC(ì œì–´ì˜ ì—­ì „), DI(ì˜ì¡´ê´€ê³„ ì£¼ì…), ê·¸ë¦¬ê³  ì»¨í…Œì´ë„ˆ](#iocì œì–´ì˜-ì—­ì „-diì˜ì¡´ê´€ê³„-ì£¼ì…-ê·¸ë¦¬ê³ -ì»¨í…Œì´ë„ˆ)
    - [ì œì–´ì˜ ì—­ì „(Inversion of Control, IoC) ğŸ”—](#ì œì–´ì˜-ì—­ì „inversion-of-control-ioc-)
    - [ì˜ì¡´ê´€ê³„ ì£¼ì…(Dependency Injection, DI) ğŸ”—](#ì˜ì¡´ê´€ê³„-ì£¼ì…dependency-injection-di-)
    - [IoC ì»¨í…Œì´ë„ˆ, DI ì»¨í…Œì´ë„ˆ ğŸ”—](#ioc-ì»¨í…Œì´ë„ˆ-di-ì»¨í…Œì´ë„ˆ-)
- [5. ìŠ¤í”„ë§ìœ¼ë¡œ ì „í™˜](#5-ìŠ¤í”„ë§ìœ¼ë¡œ-ì „í™˜)
  - [ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ](#ìŠ¤í”„ë§-ì»¨í…Œì´ë„ˆ)
  - [BeanFactoryì™€ ApplicationContext](#beanfactoryì™€-applicationcontext)
  - [ìŠ¤í”„ë§ ë¹ˆ ì„¤ì • ë©”íƒ€ ì •ë³´ - BeanDefinition](#ìŠ¤í”„ë§-ë¹ˆ-ì„¤ì •-ë©”íƒ€-ì •ë³´---beandefinition)
- [6. ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ](#6-ì‹±ê¸€í†¤-ì»¨í…Œì´ë„ˆ)
  - [ìˆœìˆ˜í•œ DI ì»¨í…Œì´ë„ˆ](#ìˆœìˆ˜í•œ-di-ì»¨í…Œì´ë„ˆ)
  - [ì‹±ê¸€í†¤ íŒ¨í„´](#ì‹±ê¸€í†¤-íŒ¨í„´)
  - [ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ](#ì‹±ê¸€í†¤-ì»¨í…Œì´ë„ˆ)
  - [ì‹±ê¸€í†¤ ë°©ì‹ì˜ ì£¼ì˜ì ](#ì‹±ê¸€í†¤-ë°©ì‹ì˜-ì£¼ì˜ì )
- [8. ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…](#8-ì˜ì¡´ê´€ê³„-ìë™-ì£¼ì…)
  - [ë‹¤ì–‘í•œ ì˜ì¡´ê´€ê³„ ì£¼ì… ë°©ë²•](#ë‹¤ì–‘í•œ-ì˜ì¡´ê´€ê³„-ì£¼ì…-ë°©ë²•)
    - [ìƒì„±ì ì£¼ì…](#ìƒì„±ì-ì£¼ì…)
    - [ìˆ˜ì •ì ì£¼ì…(Setter ì£¼ì…)](#ìˆ˜ì •ì-ì£¼ì…setter-ì£¼ì…)
    - [í•„ë“œ ì£¼ì…](#í•„ë“œ-ì£¼ì…)
    - [ì¼ë°˜ ë©”ì„œë“œ ì£¼ì…](#ì¼ë°˜-ë©”ì„œë“œ-ì£¼ì…)
  - [ì˜µì…˜ì²˜ë¦¬](#ì˜µì…˜ì²˜ë¦¬)
  - [ì¡°íšŒ ë¹ˆì´ 2ê°œ ì´ìƒ - ë¬¸ì œ](#ì¡°íšŒ-ë¹ˆì´-2ê°œ-ì´ìƒ---ë¬¸ì œ)
  - [ì¡°íšŒí•œ ë¹ˆì´ ëª¨ë‘ í•„ìš”í•  ë•Œ](#ì¡°íšŒí•œ-ë¹ˆì´-ëª¨ë‘-í•„ìš”í• -ë•Œ)
- [9. ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±](#9-ë¹ˆ-ìƒëª…ì£¼ê¸°-ì½œë°±)
</details>

---
## IntelliJ ë‹¨ì¶•í‚¤ ì •ë¦¬
- `âŒ˜ + â‡§ + â`
  - ìë™ ì™„ì„±ê³¼ ë™ì‹œì— `;`ë¥¼ ì°ì–´ì¤Œ
- `âŒ˜ + â‡§ + T` 
  - í…ŒìŠ¤íŠ¸ ì½”ë“œ ìë™ ìƒì„±
- `âŒ˜ + âŒ¥ + V`
  - ë³€ìˆ˜ ì¶”ì¶œ
- `âŒ˜ + âŒ¥ + M`
  - ë©”ì†Œë“œ ì¶”ì¶œ
- `âŒ˜ + E`
  - ìµœê·¼ ì‚¬ìš©ëœ íŒŒì¼ë“¤ì„ ë³¼ ìˆ˜ ìˆìŒ
- `iter + â‡¥`
  - ë¦¬ìŠ¤íŠ¸ì™€ ê°™ì€ ë°°ì—´ë“¤ì˜ for ë¬¸ì„ ìë™ìœ¼ë¡œ ì™„ì„±ì‹œì¼œì¤Œ


## 1. íšŒì› ë„ë©”ì¸ ê°œë°œ
```java
// ì½”ë“œ1
public class MemberServiceImpl implements MemberService{

    private final MemberRepository memberRepository = new MemoryMemberRepository();
}
```
### `ì½”ë“œ1`ì˜ ë¬¸ì œì  ğŸ¤”
- íšŒì› ì €ì¥ì†Œë¥¼ í™•ì¥í•˜ë©´ íšŒì› ì„œë¹„ìŠ¤ êµ¬í˜„ì²´ ìˆ˜ì •ì´ í•„ìˆ˜ì ì´ë¯€ë¡œ **OCP** ìœ„ë°˜ 
- íšŒì› ì„œë¹„ìŠ¤ëŠ” ì¶”ìƒí™”ë„ ì˜ì¡´í•˜ê³  êµ¬í˜„ì²´ë„ ì˜ì¡´í•˜ê¸° ë•Œë¬¸ì— **DIP** ìœ„ë°˜

### TIL ğŸ’¡
- `enum`ì€ member entity ì— êµ¬í˜„í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ íŒŒì¼ì„ ë§Œë“¤ì–´ êµ¬í˜„

## 2. íšŒì› ë„ë©”ì¸ ì‹¤í–‰ê³¼ í…ŒìŠ¤íŠ¸
### ì• í”Œì¼€ì´ì…˜ ë¡œì§ì„ êµ¬í˜„ í›„ í…ŒìŠ¤íŠ¸
```java
public class MemberApp {

    public static void main(String[] args) {
        MemberService memberService = new MemberServiceImpl();
        Member member = new Member(1L, "memberA", Grade.VIP);
        memberService.join(member);

        Member findMember = memberService.findMember(1L);
        System.out.println("new member = " + member.getName());
        System.out.println("find Member = " + findMember.getName());
    }
}
```
- ì„œë¹„ìŠ¤ê°€ ì•„ì£¼ ì»¤ì§„ë‹¤ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ì„ ë©”ì¸ ë©”ì†Œë“œë¡œ í…ŒìŠ¤íŠ¸í•˜ëŠ”ë° í•œê³„ê°€ ì¡´ì¬í•¨

### `JUnit`ì„ ì´ìš©í•´ì„œ í…ŒìŠ¤íŠ¸ â—ï¸
```java
package hello.core.member;

import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.Test;

public class MemberServiceTest {

    MemberService memberService = new MemberServiceImpl();

    @Test
    void join() {
        // given
        Member member = new Member(1L, "MemberA", Grade.VIP);

        // when
        memberService.join(member);
        Member findMember = memberService.findMember(member.getId());

        // then
        Assertions.assertThat(member).isEqualTo(findMember);
    }
}
```
- **Given-When-Then** Pattern (ì¤€ë¹„ - ì‹¤í–‰ - ê²€ì¦)
  - `given`: ì¤€ë¹„í•˜ëŠ” ê³¼ì •
  - `when`: ì‹¤ì œë¡œ ì•¡ì…˜ì„ í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” ê³¼ì •
  - `then`: í…ŒìŠ¤íŠ¸ë¥¼ ê²€ì¦í•˜ëŠ” ê³¼ì •
- ê²€ì¦ì€ `assertj`ì˜ `Assertions`ë¥¼ ì‚¬ìš©
  - `assertThat`ê³¼ `isEqualTo`ê°€ ê°™ë‹¤ë©´ Run ì°½ì— ì´ˆë¡ë¶ˆì´ ë“¤ì–´ì˜¨ë‹¤
  - `assertThat`ê³¼ `isEqualTo`ê°€ ë‹¤ë¥´ê±°ë‚˜ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤ë©´ Run ì°½ì— ë¹¨ê°„ë¶ˆì´ ë“¤ì–´ì˜¨ë‹¤
  
~~Clean Code ì—ì„œ ë‹¤ë£¨ëŠ” ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì— ëŒ€í•œ ë‚´ìš©ì„ ë‹¤ì‹œ ì½ì–´ë´ì•¼ê² ë‹¤.~~

## 3. ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ê°œë°œ
```java
// ì½”ë“œ2
public interface DiscountPolicy {

    /**
     * @return í• ì¸ ëŒ€ìƒ ê¸ˆì•¡
     */
    int discount(Member member, int price);
}

public class FixDiscountPolicy implements DiscountPolicy {

    private int discountFixAmount = 1000;

    @Override
    public int discount(Member member, int price) {
        if (member.getGrade() == Grade.VIP) {
            return discountFixAmount;
        } else {
            return 0;
        }
    }
}


public class OrderServiceImpl implements OrderService {

    private final MemberRepository memberRepository = new MemoryMemberRepository();
    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
}
```
### `ì½”ë“œ2`ì˜ ì„¤ê³„
- `DiscountPolicy`ëŠ” í• ì¸ì— ê´€ë ¨ëœ ì±…ì„ë§Œ ê°€ì§€ê³  ìˆê³ , `OrderService`ëŠ” ì£¼ë¬¸ê³¼ ê´€ë ¨ëœ ì±…ì„ë§Œ ê°€ì§€ê³  ìˆë‹¤.   
  â‡’ ê° í´ë˜ìŠ¤ëŠ” í•œ ê°€ì§€ ì±…ì„ë§Œ ê°€ì§€ê³  ìˆê¸°ì— **SRP**ë¥¼ ì§€í‚¤ê³  ìˆë‹¤.
- í•˜ì§€ë§Œ `ì½”ë“œ1`ì™€ ê°™ì´ í™•ì¥ ëœë‹¤ë©´ **OCP**, **DIP**ë¥¼ ìœ„ë°˜í•œë‹¤.

## 4. ê´€ì‹¬ì‚¬ ë¶„ë¦¬
- ê¸°ì¡´ ì½”ë“œ
```java
public class MemberServiceImpl implements MemberService {

  private final MemberRepository memeberRepository = new MemboryMemberRespository();
}

public class OrderServiceImpl implements OrderService {

    private final MemberRepository memberRepository = new MemoryMemberRepository();
    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
}
```
- ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•œ ì½”ë“œ
```java
// AppConfig.java
package hello.core;

import hello.core.discount.RateDiscountPolicy;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;

public class AppConfig {

    public MemberService memberService() {
        return new MemberServiceImpl(new MemoryMemberRepository());
    }

    public OrderService orderService() {
        return new OrderServiceImpl(new MemoryMemberRepository(), new RateDiscountPolicy());
    }
}

// MemberServiceImpl.java
public class MemberServiceImpl implements MemberService {

    private final MemberRepository memberRepository;

    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
}

// OrderServiceImpl.java
public class OrderServiceImpl implements OrderService{

    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

    public OrderServiceImpl(MemberRepository memberRepository,
        DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }
}
```
- ìœ„ì™€ ê°™ì´ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•˜ë©´ ì¸í„°í˜ì´ìŠ¤ëŠ” ì¶”ìƒí™”ë§Œ ì˜ì¡´í•˜ê¸° ë•Œë¬¸ì— **DIP**ë¥¼ ë§Œì¡±í•œë‹¤.
- ë§Œì•½ í™•ì¥ì„ í•˜ë”ë¼ë„ ì˜ì¡´ì„± ì£¼ì…ìœ¼ë¡œ ì¸í•´ **ì‚¬ìš© ì˜ì—­**(í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ)ì€ ë³€ê²½ì—†ì´ **êµ¬ì„± ì—­ì—­**(`AppConfig`)ë§Œ ìˆ˜ì •í•˜ë©´ ë˜ë¯€ë¡œ **OCP**ë¥¼ ë§Œì¡±í•œë‹¤.
- í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ì˜ì¡´ê´€ê³„ì— ëŒ€í•œ ì±…ì„ì„ ëœê³  ê¸°ëŠ¥ì—ë§Œ ì±…ì„ì„ ê°€ì§„ë‹¤.

~~ì˜ì¡´ì„± ì£¼ì…ì„ ê³µë¶€í•œ í›„ ì •ë¦¬ í•„ìš”~~

### ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ 5ê°€ì§€ ì›ì¹™ì˜ ì ìš©
í˜„ì¬ê¹Œì§€ **SRP**, **DIP**, **OCP** ì ìš©

#### SRP(Single Responsiblilty Principle) ğŸ”—
**í•œ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì ¸ì•¼ í•œë‹¤.**
- í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ì§ì ‘ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ê³ , ì‹¤í–‰í•˜ëŠ” ë‹¤ì–‘í•œ ì±…ì„ì„ ê°€ì§€ê³  ìˆìŒ
- SRPë¥¼ ë”°ë¥´ë©´ì„œ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬
- êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ì±…ì„ì€ `AppConfig`ê°€ ë‹´ë‹¹
- í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ë‹´ë‹¹

#### DIP(Dependency Inversion Principle) ğŸ”—
**í”„ë¡œê·¸ë˜ë¨¸ëŠ” "ì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ì§€, êµ¬ì²´í™”ì— ì˜ì¡´í•˜ë©´ ì•ˆëœë‹¤." ì˜ì¡´ì„± ì£¼ì…ì€ ì´ ì›ì¹™ì„ ë”°ë¥´ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ë‹¤.**
- ê¸°ì¡´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ì¶”ìƒí™” ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ì§€ë§Œ, êµ¬ì²´í™” êµ¬í˜„ í´ë˜ìŠ¤ë„ í•¨ê»˜ ì˜ì¡´í–ˆìŒ
- ê´€ì‹¬ì‚¬ ë¶„ë¦¬ í›„ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ì¶”ìƒí™” ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´

#### OCP(Open-Closed Prinicple) ğŸ”—
**ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†ŒëŠ” í™•ì¥ì€ ì—´ë ¤ìˆê³  ë³€ê²½ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤.**
- ë‹¤í˜•ì„±ì„ ì‚¬ìš©í•˜ê³  í´ë¼ì´ì–¸íŠ¸ê°€ DIPë¥¼ ì§€í‚´
- ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚¬ìš© ì˜ì—­ê³¼ êµ¬ì„± ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆ”
- `AppConfig`ê°€ ì˜ì¡´ ê´€ê³„ë¥¼ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì£¼ì…í•˜ë¯€ë¡œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ë¨
- ë”°ë¼ì„œ **ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†Œë¥¼ ìƒˆë¡­ê²Œ í™•ì¥í•´ë„ ì‚¬ìš© ì—­ì˜ì˜ ë³€ê²½ì€ ë‹«í˜€ìˆë‹¤.**

### IoC(ì œì–´ì˜ ì—­ì „), DI(ì˜ì¡´ê´€ê³„ ì£¼ì…), ê·¸ë¦¬ê³  ì»¨í…Œì´ë„ˆ
#### ì œì–´ì˜ ì—­ì „(Inversion of Control, IoC) ğŸ”—
- ë¦¬íŒ©í† ë¦¬ì „ í”„ë¡œê·¸ë¨ì€ í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„ ê°ì²´ê°€ ìŠ¤ìŠ¤ë¡œ í•„ìš”í•œ ì„œë²„ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ê³  ì‹¤í–‰í•œë‹¤. ì¦‰, êµ¬í˜„ ê°ì²´ê°€ í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì„ ìŠ¤ìŠ¤ë¡œ ì¡°ì¢…í–ˆë‹¤.
- ê´€ì‹¬ì‚¬ ë¶„ë¦¬ í›„ êµ¬í˜„ ê°ì²´ëŠ” ìì‹ ì˜ ë¡œì§ë§Œ ìˆ˜í–‰í•˜ëŠ” ì—­í• ë§Œ ë‹´ë‹¹í•˜ê³ , í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì€ `AppConfig`ê°€ ê°€ì ¸ê°„ë‹¤.
- ì´ë ‡ë“¯ í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì„ ì§ì ‘ ì œì–´í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì™¸ë¶€ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ì œì–´ì˜ ì—­ì „(IoC)ë¼ í•œë‹¤.

**í”„ë ˆì„ì›Œí¬ vs ë¼ì´ë¸ŒëŸ¬ë¦¬**
- í”„ë ˆì„ì›Œí¬ê°€ í”„ë¡œê·¸ë˜ë¨¸ê°€ ì‘ì„±í•œ ì½”ë“œë¥¼ ì œì–´í•˜ê³ , ëŒ€ì‹  ì‹¤í–‰í•˜ë©´ ê·¸ê²ƒì€ í”„ë ˆì„ì›Œí¬ë‹¤. ex) JUnit
- í”„ë¡œê·¸ë˜ë¨¸ê°€ ì‘ì„±í•œ ì½”ë“œë¥¼ ì§ì ‘ ì œì–´ì˜ íë¦„ì„ ë‹´ë‹¹í•œë‹¤ë©´, ê·¸ê²ƒì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‹¤.

#### ì˜ì¡´ê´€ê³„ ì£¼ì…(Dependency Injection, DI) ğŸ”—
- `OrderServiceImpl`ì€ `DiscountPolicy` ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•œë‹¤. ì‹¤ì œ ì–´ë–¤ êµ¬í˜„ ê°ì²´ê°€ ì‚¬ìš©ë ì§€ëŠ” ëª¨ë¦„
- ì˜ì¡´ê´€ê³„ëŠ” **ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ ê´€ê³„ì™€ ì‹¤í–‰ ì‹œì ì—ëŠ” ê²°ì •ë˜ëŠ” ë™ì ì¸ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ ê´€ê³„** ë‘˜ì„ ë¶„ë¦¬í•´ì„œ ìƒê°í•´ì•¼ í•¨

**ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ ê´€ê³„**   
í´ë˜ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” `import` ì½”ë“œë§Œ ë³´ê³  ì˜ì¡´ ê´€ê³„ë¥¼ ì‰½ê²Œ íŒë‹¨í•  ìˆ˜ ìˆë‹¤. ì •ì ì¸ ì˜ì¡´ ê´€ê³„ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ì§€ ì•Šì•„ë„ ë¶„ì„í•  ìˆ˜ ìˆë‹¤.

í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

<img width="530" alt="image" src="https://user-images.githubusercontent.com/45463495/156312530-35a6faef-4fd8-4d86-9e67-1cc8e1d21483.png">

- `OrderServiceImpl`ì€ `MemberRepository`, `DiscountPolicy`ì— ì˜ì¡´í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŒ
- í•˜ì§€ë§Œ ì´ëŸ¬í•œ í´ë˜ìŠ¤ ì˜ì¡´ ê´€ê³„ë§Œìœ¼ë¡œëŠ” ì‹¤ì œ ì–´ë–¤ ê°ì²´ê°€ `OrderServiceImpl`ì— ì£¼ì…ë ì§€ ì•Œ ìˆ˜ ì—†ìŒ

**ë™ì ì¸ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ ê´€ê³„**   
ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì ì— ì‹¤ì œ ìƒì„±ëœ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡°ê°€ ì—°ê²°ëœ ì˜ì¡´ ê´€ê³„

ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨

<img width="530" alt="image" src="https://user-images.githubusercontent.com/45463495/156313379-20e8c597-42dd-45e6-990a-f1fec811827e.png">

- ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì ì— ì™¸ë¶€ì—ì„œ ì‹¤ì œ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•´ì„œ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ ì‹¤ì œ ì˜ì¡´ ê´€ê³„ê°€ ì—°ê²°ë˜ëŠ” ê²ƒì„ **ì˜ì¡´ê´€ê³„ ì£¼ì…**ì´ë¼ í•œë‹¤.
- ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ , í´ë¼ì´ì–¸íŠ¸ê°€ í˜¸ì¶œí•˜ëŠ” ëŒ€ìƒì˜ íƒ€ì… ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë³€ê²½ ê°€ëŠ¥
- ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ **ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ , ë™ì ì¸ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ê´€ê³„ë¥¼ ì‰½ê²Œ ë³€ê²½ ê°€ëŠ¥**

#### IoC ì»¨í…Œì´ë„ˆ, DI ì»¨í…Œì´ë„ˆ ğŸ”—
- `AppConfig`ì²˜ëŸ¼ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ë©´ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì—°ê²°í•´ì£¼ëŠ” ê²ƒì„ IoC ì»¨í…Œì´ë„ˆ, **DI ì»¨í…Œì´ë„ˆ**ë¼ í•œë‹¤.
- ì˜ì¡´ê´€ê³„ ì£¼ì…ì— ì´ˆì ì„ ë§ì¶° ìµœê·¼ì—ëŠ” ì£¼ë¡œ DI ì»¨í…Œì´ë„ˆë¼ í•œë‹¤.

## 5. ìŠ¤í”„ë§ìœ¼ë¡œ ì „í™˜
```java
@Configuration
public class AppConfig {

    @Bean
    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    @Bean
    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    @Bean
    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    @Bean
    public DiscountPolicy discountPolicy() {
        return new RateDiscountPolicy();
    }
}

```
- `AppConfig`ì— ì„¤ì •ì„ êµ¬ì„±í•œë‹¤ëŠ” ëœ»ì˜ `@Configuration`ì„ ë¶™ì—¬ì¤Œ
- ê° ë©”ì„œë“œì— `@Bean`ì„ ë¶™ì—¬ì¤Œ -> ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡

### ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ
- `ApplicationContext`ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ í•œë‹¤.
- ê¸°ì¡´ì—ëŠ” ê°œë°œìê°€ `AppConfig`ë¥¼ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì˜ì¡´ì„±ì„ ì£¼ì…í–ˆì§€ë§Œ, ì´ì œë¶€í„° ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ì„œ ì‚¬ìš©í•œë‹¤.
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” `@Configuration`ì´ ë¶™ì€ `AppConfig`ë¥¼ êµ¬ì„± ì •ë³´ë¡œ ì‚¬ìš©
- `@Bean`ì´ë¼ ì íŒ ë©”ì„œë“œë¥¼ ëª¨ë‘ í˜¸ì¶œí•˜ì—¬ ë°˜í™˜ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ë“±ë¡í•œë‹¤. ì´ë ‡ê²Œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆì´ë¼ í•¨

**ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ìƒì„± ê³¼ì •**

1. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±
```java
ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
```
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ë•ŒëŠ” êµ¬ì„± ì •ë³´ë¥¼ ì§€ì •í•´ì£¼ì–´ì•¼ í•¨

2. ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡
![](https://user-images.githubusercontent.com/45463495/156500577-f15e775b-b7e5-46b6-8181-9213b88b303b.png)   
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” íŒŒë¼ë¯¸ë”ë¡œ ë„˜ì–´ì˜¨ ì„¤ì • í´ë˜ìŠ¤ ì •ë³´ë¥¼ ì‚¬ìš©í•´ì„œ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡

ğŸ’¡ ë¹ˆ ì´ë¦„
- ë©”ì„œë“œ ì´ë¦„ì„ ì‚¬ìš©
- ì§ì ‘ ë¶€ì—¬ ê°€ëŠ¥
  - `@Bean(name="ms")`
- ë¹ˆ ì´ë¦„ì€ í•­ìƒ ë‹¤ë¥¸ ì´ë¦„ì„ ë¶€ì—¬í•´ì•¼ í•¨

3. ìŠ¤í”„ë§ ë¹ˆ ì˜ì¡´ê´€ê³„ ì„¤ì •

ì¤€ë¹„|ì™„ë£Œ
:--:|:--:
![image](https://user-images.githubusercontent.com/45463495/156500909-a5ff20f2-1d0f-456c-a1cb-d07b39549737.png)|![image](https://user-images.githubusercontent.com/45463495/156500969-981c546e-330b-47e1-8fa7-b6a7465a78cd.png)
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì„¤ì • ì •ë³´ë¥¼ ì°¸ê³ í•´ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…

**ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì¡°íšŒ**
```java
AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);

@Test
@DisplayName("ëª¨ë“  ë¹ˆ ì¶œë ¥")
void findAllBean() {
    String[] beanDefinitionNames = ac.getBeanDefinitionNames();
    for (String beanDefinitionName : beanDefinitionNames) {
        Object bean = ac.getBean(beanDefinitionName);
        System.out.println("name = " + beanDefinitionName + " Object = " + bean);
    }
}

@Test
@DisplayName("ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ì¶œë ¥")
void findApplicationBean() {
    String[] beanDefinitionNames = ac.getBeanDefinitionNames();
    for (String beanDefinitionName : beanDefinitionNames) {
        BeanDefinition beanDefinition = ac.getBeanDefinition(beanDefinitionName);

        if (beanDefinition.getRole() == BeanDefinition.ROLE_APPLICATION) {
            Object bean = ac.getBean(beanDefinitionName);
            System.out.println("name = " + beanDefinitionName + " Object = " + bean);
        }
    }
}

@Test
@DisplayName("ë¹ˆ ì´ë¦„ì„ ì¡°íšŒ")
void findBeanByName() {
    MemberService memberService = ac.getBean("memberService", MemberService.class);
    assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
}

@Test
@DisplayName("íƒ€ì…ìœ¼ë¡œë§Œ ì¡°íšŒ")
void findBeanByType() {
    MemberService memberService = ac.getBean(MemberService.class);
    assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
}

@Test
@DisplayName("êµ¬ì²´ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ")
void findBeanByName2() {
    MemberService memberService = ac.getBean("memberService", MemberServiceImpl.class);
    assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
}

@Test
@DisplayName("ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì¡°íšŒX")
void findBeanByNameX() {
    // MemberService xxx = ac.getBean("xxx", MemberService.class);
    assertThrows(NoSuchBeanDefinitionException.class,
        () -> ac.getBean("xxx", MemberService.class));
}

@Test
@DisplayName("íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ ì‹œ ê°™ì€ íƒ€ì…ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ì¤‘ë³µ ì˜¤ë¥˜ ë°œìƒ")
void findBeanByTypeDuplicate() {
//        ac.getBean(MemberRepository.class);
    assertThrows(NoUniqueBeanDefinitionException.class, () -> ac.getBean(MemberRepository.class));
}

@Test
@DisplayName("íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ ì‹œ ê°™ì€ íƒ€ì…ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ë¹ˆ ì´ë¦„ì„ ì§€ì •í•˜ë©´ ëœë‹¤")
void findBeanByName() {
    MemberRepository memberRepository = ac.getBean("memberRepository1",
        MemberRepository.class);
    assertThat(memberRepository).isInstanceOf(MemberRepository.class);
}

@Test
@DisplayName("íŠ¹ì • íƒ€ì… ëª¨ë‘ ì¡°íšŒí•˜ê¸°")
void findAllBeanByType() {
    Map<String, MemberRepository> beansOfType = ac.getBeansOfType(MemberRepository.class);
    for (String key : beansOfType.keySet()) {
        System.out.println("key = " + key + " value = " + beansOfType.get(key));
    }
    System.out.println("beansOfType = " + beansOfType);
    assertThat(beansOfType.size()).isEqualTo(2);
}

@Configuration
static class SameBeanConfig {

    @Bean
    public MemberRepository memberRepository1() {
        return new MemoryMemberRepository();
    }

    @Bean
    public MemberRepository memberRepository2() {
        return new MemoryMemberRepository();
    }

}
```
- ëª¨ë“  ë¹ˆ ì¶œë ¥
  - ìŠ¤í”„ë§ì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì •ë³´ë¥¼ ì¶œë ¥
  - `getBeanDefinitionNames()` : ìŠ¤í”„ë§ì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì´ë¦„ ì¡°íšŒ
  - `getBean()` : ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë¹ˆ ê°ì²´(ì¸ìŠ¤í„´ìŠ¤) ì¡°íšŒ
- ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ì¶œë ¥
  - `getRole()` : ìŠ¤í”„ë§ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆì„ êµ¬ë¶„
    - `ROLE_APPLICATION` : ì‚¬ìš©ìê°€ ì •ì˜í•œ ë¹ˆ
    - `ROLE_INFRASTRUCTURE` : ìŠ¤í”„ë§ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆ
- ë™ì¼í•œ íƒ€ì…ì´ ë‘ ê°œì´ìƒì¼ ê²½ìš°
  - `getBeansOfType()` ì‚¬ìš©
    - í•´ë‹¹ íƒ€ì…ì— ëª¨ë“  ë¹ˆì„ ì¡°íšŒí•  ìˆ˜ ìˆìŒ

### BeanFactoryì™€ ApplicationContext
![](https://user-images.githubusercontent.com/45463495/156716543-dc4f4b08-2668-4bea-8be8-a0a6233f7408.png)

**BeanFactory**
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ìµœìƒìœ„ ì¸í„°í˜ì´ìŠ¤
- ìŠ¤í”„ë§ ë¹ˆì„ ê´€ë¦¬í•˜ê³  ì¡°íšŒí•˜ëŠ” ì—­í•  ë‹´ë‹¹
- `getBean()` ì œê³µ

**AppplicationContext**
- BeanFactory ê¸°ëŠ¥ì„ ëª¨ë‘ ìƒì†ë°›ì•„ì„œ ì œê³µ
- ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•  ë•ŒëŠ” ë¹ˆì„ ê´€ë¦¬í•˜ê³  ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ì€ ë¬¼ë¡ ì´ê³ , ìˆ˜ ë§ì€ ë¶€ê°€ê¸°ëŠ¥ì´ í•„ìš”
- AppplicationContextê°€ ì œê³µí•˜ëŠ” ë¶€ê°€ê¸°ëŠ¥
  - ë©”ì‹œì§€ì†ŒìŠ¤ë¥¼ í™œìš”í•œ êµ­ì œí™” ê¸°ëŠ¥
    - ex) í•œêµ­ì—ì„œ ë“¤ì–´ì˜¤ë©´ í•œêµ­ì–´, ì˜ì–´ê¶Œì—ì„œ ë“¤ì–´ì˜¤ë©´ ì˜ì–´ë¡œ ì¶œë ¥
  - í™˜ê²½ë³€ìˆ˜
    - ë¡œì»¬, ê°œë°œ, ìš´ì˜ë“¤ì„ êµ¬ë¶„í•´ì„œ ì²˜ë¦¬
  - ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë²¤íŠ¸
    - ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•˜ê³  êµ¬ë…í•˜ëŠ” ëª¨ë¸ì„ í¸ë¦¬í•˜ê²Œ ì§€ì›
  - í¸ë¦¬í•œ ë¦¬ì†ŒìŠ¤ ì¡°íšŒ
    - íŒŒì¼, í´ë˜ìŠ¤íŒ¨ìŠ¤, ì™¸ë¶€ ë“±ì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ í¸ë¦¬í•˜ê²Œ ì¡°íšŒ

### ìŠ¤í”„ë§ ë¹ˆ ì„¤ì • ë©”íƒ€ ì •ë³´ - BeanDefinition
**BeanDefinition** ì •ë³´
- BeanClassName : ìƒì„±í•  ë¹ˆì˜ í´ë˜ìŠ¤ ëª…
- factoryBeanName : íŒ©í† ë¦¬ ì—­í• ì˜ ë¹ˆì„ ì‚¬ìš©í•  ê²½ìš° ì´ë¦„
- factoryMethodName: ë¹ˆì„ ìƒì„±í•  íŒ©í† ë¦¬ ë©”ì„œë“œ ì§€ì •
- Scope : ì‹±ê¸€í†¤(ê¸°ë³¸ ê°’)
- lazyInt : ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ë•Œ ë¹ˆì„ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì‹¤ì œ ë¹ˆì„ ì‚¬ìš©í•  ë•Œê¹Œì§€ ìµœëŒ€í•œ ìƒì„±ì„ ì§€ì—°ì²˜ë¦¬ í•˜ëŠ” ì§€ ì—¬ë¶€
- InitMethodName : ë¹ˆì„ ìƒì„±í•˜ê³ , ì˜ì¡´ê´€ê³„ë¥¼ ì ìš©í•œ ë’¤ì— í˜¸ì¶œë˜ëŠ” ì´ˆê¸°í™” ë©”ì„œë“œ ëª…
- DestoryMethodName : ë¹ˆì˜ ìƒëª…ì£¼ê¸°ê°€ ëë‚˜ì„œ ì œê±°í•˜ê¸° ì§ì „ì— í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œ ëª…
- Constructor arguments, Properties : ì˜ì¡´ê´€ê³„ ì£¼ì…ì—ì„œ ì‚¬ìš©

## 6. ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ
### ìˆœìˆ˜í•œ DI ì»¨í…Œì´ë„ˆ
<img width="538" alt="image" src="https://user-images.githubusercontent.com/45463495/156974101-08e832ed-cfda-421c-8919-3d151fd8bf3f.png">

- ê³ ê°ì´ ìš”ì²­ì„ í•  ë•Œë§ˆë‹¤ ê°ì²´ë¥¼ ìƒˆë¡œ ìƒì„±í•¨ -> ë©”ëª¨ë¦¬ ë‚­ë¹„ê°€ ì‹¬í•¨

### ì‹±ê¸€í†¤ íŒ¨í„´
- í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ë”± 1ê°œë§Œ ìƒì„±ë˜ëŠ” ê²ƒì„ ë³´ì¥í•˜ëŠ” ë””ìì¸ íŒ¨í„´
- ì‹±ê¸€í†¤ íŒ¨í„´ì˜ ë‹¨ì 
  - êµ¬í˜„í•˜ëŠ” ì½”ë“œ ìì²´ê°€ ë§ì´ ë“¤ì–´ê°
  - ì˜ì¡´ê´€ê³„ìƒ í´ë¼ì´ì–¸íŠ¸ê°€ êµ¬ì²´ í´ë˜ìŠ¤ì˜ ì˜ì¡´ -> DIP ìœ„ë°˜, OCP ìœ„ë°˜í•  ê°€ëŠ¥ì„±ì´ ë†’ìŒ
  - í…ŒìŠ¤íŠ¸ê°€ ì–´ë ¤ì›€
  - ë‚´ë¶€ ì†ì„±ì„ ë³€ê²½í•˜ê±°ë‚˜ ì´ˆê¸°í™”ê°€ ì–´ë ¤ì›€
  - private ìƒì„±ìë¡œ ìì‹ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê¸° ì–´ë ¤ì›€
  - ìœ ì—°ì„±ì´ ë–¨ì–´ì§

### ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ
- ì‹±ê¸€í†¤ íŒ¨í„´ì„ ì ìš©í•˜ì§€ ì•Šì•„ë„ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬

**ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ ì ìš© í›„**   
<img width="538" alt="image" src="https://user-images.githubusercontent.com/45463495/156974175-b450142e-6803-4a1b-974c-74d2292fa69f.png">

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ë•ë¶„ì— ê³ ê°ì´ ìš”ì²­ì´ ì˜¬ ë•Œ ë§ˆë‹¤ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì´ë¯¸ ë§Œë“¤ì–´ì§„ ê°ì²´ë¥¼ ê³µìœ í•´ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŒ

### ì‹±ê¸€í†¤ ë°©ì‹ì˜ ì£¼ì˜ì 
- ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•˜ë‚˜ë§Œ ìƒì„±í•´ì„œ ê³µìœ í•˜ëŠ” ì‹±ê¸€í†¤ ë°©ì‹ì€ ì—¬ëŸ¬ í´ë¼ì´ì–¸íŠ¸ê°€ í•˜ë‚˜ì˜ ê°™ì€ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê³µìœ í•˜ê¸° ë•Œë¬¸ì— ì‹±ê¸€í†¤ ê°ì²´ëŠ” ìƒíƒœë¥¼ ìœ ì§€í•˜ê²Œ ì„¤ê³„í•˜ë©´ ì•ˆëœë‹¤.
- ë¬´ìƒíƒœë¡œ ì„¤ê³„í•´ì•¼ í•œë‹¤.
  - íŠ¹ì • í´ë¼ì´ì–¸íŠ¸ì— ì˜ì¡´ì ì¸ í•„ë“œê°€ ìˆìœ¼ë©´ ì•ˆë¨
  - íŠ¹ì • í´ë¼ì´ì–¸íŠ¸ê°€ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆëŠ” í•„ë“œê°€ ìˆìœ¼ë©´ ì•ˆë¨
  - ê°€ê¸‰ì  ì½ê¸°ë§Œ ê°€ëŠ¥í•´ì•¼ í•¨
  - í•„ë“œ ëŒ€ì‹  ìë°”ì—ì„œ ê³µìœ ë˜ì§€ ì•ŠëŠ” ì§€ì—­ë³€ìˆ˜, íŒŒë¼ë¯¸í„°, ThreadLocal ë“±ì„ ì‚¬ìš©
- ìŠ¤í”„ë§ ë¹ˆì˜ í•„ë“œì— ê³µìœ  ê°’ì„ ì„¤ì •í•˜ë©´ í° ì¥ì• ê°€ ë°œìƒí•  ìˆ˜ ìˆìŒ

**ì˜ˆì‹œ**
```java
package hello.core.singleton;

public class StateFulService {

    private int price; // ìƒíƒœë¥¼ ìœ ì§€í•˜ëŠ” í•„ë“œ

    public void order(String name, int price) {
        System.out.println("name = " + name + " price = " + price);
        this.price = price; // ì—¬ê¸°ê°€ ë¬¸ì œ
    }

    public int getPrice() {
        return price;
    }
}


package hello.core.singleton;

import static org.assertj.core.api.Assertions.assertThat;
import static org.junit.jupiter.api.Assertions.*;

import org.junit.jupiter.api.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Bean;

class StateFulServiceTest {

    @Test
    void stateFulServiceSingleton() {
        ApplicationContext ac = new AnnotationConfigApplicationContext(TestConfig.class);

        StateFulService stateFulService1 = ac.getBean(StateFulService.class);
        StateFulService stateFulService2 = ac.getBean(StateFulService.class);


        // ThreadA: A ì‚¬ìš©ì 1000ì› ì£¼ë¬¸
        stateFulService1.order("userA", 1000);
        // ThreadB: B ì‚¬ìš©ì 2000ì› ì£¼ë¬¸
        stateFulService2.order("userB", 2000);

        // ThreadA: ì‚¬ìš©ì A ì£¼ë¬¸ ê¸ˆì•¡ ì¡°íšŒ
        int price = stateFulService1.getPrice();
        System.out.println("price = " + price);

        assertThat(stateFulService1.getPrice()).isEqualTo(2000);
    }

    static class TestConfig {

        @Bean
        public StateFulService stateFulService() {
            return new StateFulService();
        }
    }
}
```

## 8. ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…
### ë‹¤ì–‘í•œ ì˜ì¡´ê´€ê³„ ì£¼ì… ë°©ë²•
- ìƒì„±ì ì£¼ì…
- ìˆ˜ì •ì ì£¼ì…(setter ì£¼ì…)
- í•„ë“œ ì£¼ì…
- ì¼ë°˜ ë©”ì„œë“œ ì£¼ì…

#### ìƒì„±ì ì£¼ì…
- ìƒì„±ìë¥¼ í†µí•´ì„œ ì˜ì¡´ ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ë°©ë²•
- ìƒì„±ì í˜¸ì¶œ ì‹œì ì— ë”± 1ë²ˆë§Œ í˜¸ì¶œë˜ëŠ” ê²ƒì´ ë³´ì¥ë¨
- **ë¶ˆë³€**, **í•„ìˆ˜** ì˜ì¡´ê´€ê³„ì— ì‚¬ìš©
- ìƒì„±ìê°€ í•˜ë‚˜ë§Œ ìˆë‹¤ë©´ `@Autowired` ìƒëµ ê°€ëŠ¥
```java
@Component
public class OrderServiceImpl implements OrderService {
    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;
    
    @Autowired
    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }
}
```

#### ìˆ˜ì •ì ì£¼ì…(Setter ì£¼ì…)
- setterë¼ ë¶ˆë¦¬ëŠ” í•„ë“œì˜ ê°’ì„ ë³€ê²½í•˜ëŠ” ìˆ˜ì •ì ë©”ì„œë“œë¥¼ í†µìƒˆì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ë°©ë²•
- **ì„ íƒ**, **ë³€ê²½** ê°€ëŠ¥ì„±ì´ ìˆëŠ” ì˜ì¡´ê´€ê³„ì— ì‚¬ìš©
- ìë°”ë¹ˆ í”„ë¡œí¼í‹° ê·œì•½ì˜ ìˆ˜ì •ì ë©”ì„œë“œ ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
```java
@Component
public class OrderServiceImpl implements OrderService {
  
    private MemberRepository memberRepository;
    private DiscountPolicy discountPolicy;

    @Autowired
    public void setMemberRepository(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }

    @Autowired
    public void setDiscountPolicy(DiscountPolicy discountPolicy) {
        this.discountPolicy = discountPolicy;
    }
}
```

#### í•„ë“œ ì£¼ì…
- í•„ë“œì— ë°”ë¡œ ì£¼ì…í•˜ëŠ” ë°©ë²•
- ì™¸ë¶€ì—ì„œ ë³€ê²½ì´ ë¶ˆê°€ëŠ¥í•˜ë¯€ë¡œ í…ŒìŠ¤íŠ¸ í•˜ê¸° í˜ë“¦
- DI í”„ë ˆì„ì›Œí¬ê°€ ì—†ìœ¼ë©´ ì•„ë¬´ê²ƒë„ í•  ìˆ˜ ì—†ìŒ
- ì‚¬ìš© ìš©ë„
  - ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹¤ì œ ì½”ë“œì™€ ê´€ê³„ ì—†ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œ
  - ìŠ¤í”„ë§ ì„¤ì •ì„ ëª©ì ìœ¼ë¡œ í•˜ëŠ” `@Configuration` ê°™ì€ ê³³ì—ì„œë§Œ íŠ¹ë³„í•œ ìš©ë„ë¡œ ì‚¬ìš©

```java
@Component
public class OrderServiceImpl implements OrderService {
    
    @Autowired
    private MemberRepository memberRepository;
    
    @Autowired
    private DiscountPolicy discountPolicy;
  }
```

#### ì¼ë°˜ ë©”ì„œë“œ ì£¼ì…
- ì¼ë°˜ ë©”ì„œë“œë¥¼ í†µí•´ì„œ ì£¼ì…
- í•œë²ˆì— ì—¬ëŸ¬ í•„ë“œë¥¼ ì£¼ì… ë°›ì„ ìˆ˜ ìˆìŒ
- ì¼ë°˜ì ìœ¼ë¡œ ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ

```java
@Component
public class OrderServiceImpl implements OrderService {

    private MemberRepository memberRepository;
    private DiscountPolicy discountPolicy;
    
    @Autowired
    public void init(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }
}
```

### ì˜µì…˜ì²˜ë¦¬
ì£¼ì…í•  ìŠ¤í”„ë§ ë¹ˆì´ ì—†ì–´ë„ ë™ì‘í•´ì•¼ í•  ë•Œê°€ ìˆì„ ë•Œ `@Autowired`ë§Œ ì‚¬ìš©í•˜ë©´ `required` ì˜µì…˜ì˜ ê¸°ë³¸ ê°’ì´ `true`ë¡œ ë˜ì–´ ìˆì–´ ìë™ ì£¼ì… ëŒ€ìƒì´ ì—†ìœ¼ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.

ìë™ ì£¼ì… ëŒ€ìƒì„ ì˜µì…˜ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•
- `@Autowired(required=false)`: ìë™ ì£¼ì…í•  ëŒ€ìƒì´ ì—†ìœ¼ë©´ ìˆ˜ì •ì ë©”ì„œë“œ ìì²´ê°€ í˜¸ì¶œ ì•ˆë¨
- `@Nullable`: ìë™ ì£¼ì…í•  ëŒ€ìƒì´ ì—†ìœ¼ë©´ nullì´ ì…ë ¥ë¨
- `Optional<>`: ìë™ ì£¼ì…í•  ëŒ€ìƒì´ ì—†ìœ¼ë©´ `Optional.empty`ê°€ ì…ë ¥ë¨

**ì •ë¦¬**
- ìƒì„±ì ì£¼ì… ë°©ì‹ì„ ì„ íƒí•˜ëŠ” ì´ìœ ëŠ” ì—¬ëŸ¬ê°€ì§€ê°€ ìˆì§€ë§Œ, í”„ë ˆì„ì›Œí¬ì— ì˜ì¡´í•˜ì§€ ì•Šê³ , ìˆœìˆ˜í•œ ìë°” ì–¸ì–´ì˜ íŠ¹ì§•ì„ ì˜ ì‚´ë¦¬ëŠ” ë°©ë²•
- ê¸°ë³¸ìœ¼ë¡œ ìƒì„±ì ì£¼ì…ì„ ì‚¬ìš©í•˜ê³ , í•„ìˆ˜ ê°’ì´ ì•„ë‹Œ ê²½ìš°ëŠ” ìˆ˜ì •ì ì£¼ì… ë°©ì‹ì„ ì˜µì…˜ìœ¼ë¡œ ë¶€ì—¬
  - ìƒì„±ì ì£¼ì…ê³¼ ìˆ˜ì •ì ì£¼ì… ë™ì‹œ ì‚¬ìš© ê°€ëŠ¥
- í•­ìƒ ìƒì„±ì ì£¼ì…ì„ ì„ íƒ

**Lombok**
```gradle
//lombok ì„¤ì • ì¶”ê°€ ì‹œì‘
configurations {
	compileOnly {
		extendsFrom annotationProcessor
	}
}
//lombok ì„¤ì • ì¶”ê°€ ë

//lombok ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€ ì‹œì‘
compileOnly 'org.projectlombok:lombok'
annotationProcessor 'org.projectlombok:lombok'

testCompileOnly 'org.projectlombok:lombok'
testAnnotationProcessor 'org.projectlombok:lombok'
//lombok ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€ ë
```
ë¼ì´ë¸ŒëŸ¬ë¦¬ ì ìš© ë°©ë²•
1. Preferneces -> plugin -> lombok ê²€ìƒ‰ ì„¤ì¹˜ ì‹¤í–‰
2. Preferneces -> Annotation Processors ê²€ìƒ‰ -> Enable annotation processing ì²´í¬

**Lombokì„ ì ìš©í•œ ì½”ë“œ**
```java
@Component
@RequiredArgsConstructor
public class OrderServiceImpl implements OrderService{

    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;
}
```

### ì¡°íšŒ ë¹ˆì´ 2ê°œ ì´ìƒ - ë¬¸ì œ
`@Autowired`ëŠ” íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•œë‹¤. íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•˜ë©´ ì„ íƒëœ ë¹ˆì´ 2ê°œ ì´ìƒì¼ ë•Œ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.   
`DiscountPolicy`ì˜ í•˜ìœ„ íƒ€ì…ì¸ `FixDiscountPolicy`, `RateDiscountPolicy` ë‘˜ ë‹¤ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ì„ ì–¸í•˜ë©´ `NoUniqueBeanDefinitionException` ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.

**í•´ê²° ë°©ë²•**
- `@Autowired` í•„ë“œ ëª… ë§¤ì¹­
  - `@Autowired`ëŠ” íƒ€ì… ë§¤ì¹­ì„ ì‹œë„í•˜ê³ , ì´ë•Œ ì—¬ëŸ¬ ë¹ˆì´ ìˆìœ¼ë©´ í•„ë“œ ì´ë¦„, íŒŒë¼ë¯¸í„° ì´ë¦„ìœ¼ë¡œ ë¹ˆ ì´ë¦„ì„ ì¶”ê°€ ë§¤ì¹­í•œë‹¤.
- `@Qualifier` ì‚¬ìš©
  - ì¶”ê°€ êµ¬ë¶„ìë¥¼ ë¶™ì—¬ì£¼ëŠ” ë°©ë²•
- `@Primary`
  - ìš°ì„ ìˆœìœ„ë¥¼ ì •í•˜ëŠ” ë°©ë²•

### ì¡°íšŒí•œ ë¹ˆì´ ëª¨ë‘ í•„ìš”í•  ë•Œ
```java
package hello.core.autowired;

import static org.assertj.core.api.Assertions.assertThat;

import hello.core.AutoAppConfig;
import hello.core.discount.DiscountPolicy;
import hello.core.member.Grade;
import hello.core.member.Member;
import java.util.List;
import java.util.Map;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class AllBeanTest {

    @Test
    void findAllBean() {
        ApplicationContext ac = new AnnotationConfigApplicationContext(AutoAppConfig.class, DiscountService.class);

        DiscountService discountService = ac.getBean(DiscountService.class);
        Member member = new Member(1L, "userA", Grade.VIP);
        int discountPrice1 = discountService.discount(member, 10000, "fixDiscountPolicy");

        assertThat(discountService).isInstanceOf(DiscountService.class);
        assertThat(discountPrice1).isEqualTo(1000);

        int discountPrice2 = discountService.discount(member, 20000, "rateDiscountPolicy");
        assertThat(discountPrice2).isEqualTo(2000);
    }

    static class DiscountService {
        private final Map<String, DiscountPolicy> policyMap;
        private final List<DiscountPolicy> policies;

        @Autowired
        public DiscountService(
            Map<String, DiscountPolicy> policyMap,
            List<DiscountPolicy> policies) {
            this.policyMap = policyMap;
            this.policies = policies;
            System.out.println("policyMap = " + policyMap);
            System.out.println("policies = " + policies);
        }

        public int discount(Member member, int price, String discountCode) {
            DiscountPolicy discountPolicy = policyMap.get(discountCode);
            return discountPolicy.discount(member, price);
        }
    }
}
```

## 9. ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±
**ìŠ¤í”„ë§ ë¹ˆì˜ lifecycle**
1. ê°ì²´ ìƒì„±
2. ì˜ì¡´ê´€ê³„ ì£¼ì…

**ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë²¤íŠ¸ lifecycle**
1. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±
2. ìŠ¤í”„ë§ ë¹ˆ ìƒì„±
3. ì˜ì¡´ê´€ê³„ ì£¼ì…
4. ì´ˆê¸°í™” ì½œë°±
5. ì‚¬ìš©
6. ì†Œë©¸ì „ ì½œë°±
7. ìŠ¤í”„ë§ ì¢…ë£Œ

- **ì´ˆê¸°í™” ì½œë°±**: ë¹ˆì´ ìƒì„±ë˜ê³ , ë¹ˆì˜ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì™„ë£Œëœ í›„ í˜¸ì¶œ
- **ì†Œë©¸ì „ ì½œë°±**: ë¹ˆì´ ì†Œë©¸ë˜ê¸° ì§ì „ì— í˜¸ì¶œ

> ğŸ’¡ **ê°ì²´ì˜ ìƒì„±ê³¼ ì´ˆê¸°í™”ë¥¼ ë¶„ë¦¬í•˜ì**   
> ìƒì„±ìëŠ” í•„ìˆ˜ ì •ë³´(íŒŒë¼ë¯¸í„°)ë¥¼ ë°›ê³  ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•´ì„œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ì±…ì„ì„ ê°€ì§„ë‹¤. ë°˜ë©´ì— ì´ˆê¸°í™”ëŠ” ì´ë ‡ê²Œ ìƒì„±ëœ ê°’ë“¤ì„ í™œìš©í•´ì„œ ì™¸ë¶€ ì»¤ë„¥ì…˜ì„ ì—°ê²°í•˜ëŠ” ë“± ë¬´ê±°ìš´ ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤. ë”°ë¼ì„œ ìƒì„±ì ì•ˆì—ì„œ ë¬´ê±°ìš´ ì´ˆê¸°í™” ì‘ì—…ì„ í•¨ê»˜ í•˜ëŠ” ê²ƒë³´ë‹¤ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë¶€ë¶„ê³¼ ì´ˆê¸°í™” í•˜ëŠ” ë¶€ë¶„ì„ ëª…í™•í•˜ê²Œ ë‚˜ëˆ„ëŠ” ê²ƒì´ ìœ ì§€ë³´ìˆ˜ì—ì„œ ê´€ì ì—ì„œ ì¢‹ë‹¤. ë¬¼ë¡  ì´ˆê¸°í™” ì‘ì—…ì´ ë¶€ ê°’ë“¤ë§Œ ì•½ê°„ ë³€ê²½í•˜ëŠ” ì •ë„ë¡œ ë‹¨ìˆœí•œ ê²½ìš°ì—ëŠ” ìƒì„±ìì—ì„œ í•œë²ˆì— ë‹¤ ì²˜ë¦¬í•˜ëŠ”ê²Œ ë” ë‚˜ì„ ìˆ˜ ìˆë‹¤.

**ìŠ¤í”„ë§ì˜ ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±**
- ì¸í„°í˜ì´ìŠ¤ (`InitializingBean`, `DisposableBean`)
  - ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤
  - ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´
  - ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œì˜ ì´ë¦„ì„ ë³€ê²½í•  ìˆ˜ ì—†ìŒ
  - ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì ìš©ì„ í•  ìˆ˜ ì—†ìŒ
- ì„¤ì • ì •ë³´ì— ì´ˆê¸°í™” ë©”ì„œë“œ, ì¢…ë£Œ ë©”ì„œë“œ ì§€ì •
  - ë©”ì„œë“œ ì´ë¦„ì„ ììœ ë¡­ê²Œ ì¤„ ìˆ˜ ìˆìŒ
  - ìŠ¤í”„ë§ ì½”ë“œì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ
  - ì„¤ì • ì •ë³´ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ë„ ì´ˆê¸°í™”, ì¢…ë£Œ ë©”ì„œë“œë¥¼ ì ìš© í•  ìˆ˜ ìˆìŒ
- `@PostConstruct`, `@PreDestroy`
  - ìë°” í‘œì¤€ì´ê¸°ë•Œë¬¸ì— ìŠ¤í”„ë§ì— ì¢…ì†ì ì´ì§€ ì•ŠìŒ
  - ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ëŠ” ì ìš©ì„í•˜ì§€ ëª»í•¨