<h1> ğŸŒ± ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê¸°ë³¸í¸</h1>

> ë‚´ìš© ì •ë¦¬

<details>
<summary>Table of Contents</summary>

- [IntelliJ ë‹¨ì¶•í‚¤ ì •ë¦¬](#intellij-ë‹¨ì¶•í‚¤-ì •ë¦¬)
- [1. íšŒì› ë„ë©”ì¸ ê°œë°œ](#1-íšŒì›-ë„ë©”ì¸-ê°œë°œ)
  - [`ì½”ë“œ1`ì˜ ë¬¸ì œì  ğŸ¤”](#ì½”ë“œ1ì˜-ë¬¸ì œì -)
  - [TIL ğŸ’¡](#til-)
- [2. íšŒì› ë„ë©”ì¸ ì‹¤í–‰ê³¼ í…ŒìŠ¤íŠ¸](#2-íšŒì›-ë„ë©”ì¸-ì‹¤í–‰ê³¼-í…ŒìŠ¤íŠ¸)
  - [ì• í”Œì¼€ì´ì…˜ ë¡œì§ì„ êµ¬í˜„ í›„ í…ŒìŠ¤íŠ¸](#ì• í”Œì¼€ì´ì…˜-ë¡œì§ì„-êµ¬í˜„-í›„-í…ŒìŠ¤íŠ¸)
  - [`JUnit`ì„ ì´ìš©í•´ì„œ í…ŒìŠ¤íŠ¸ â—ï¸](#junitì„-ì´ìš©í•´ì„œ-í…ŒìŠ¤íŠ¸-ï¸)
- [3. ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ê°œë°œ](#3-ì£¼ë¬¸ê³¼-í• ì¸-ë„ë©”ì¸-ê°œë°œ)
  - [`ì½”ë“œ2`ì˜ ì„¤ê³„](#ì½”ë“œ2ì˜-ì„¤ê³„)
- [4. ê´€ì‹¬ì‚¬ ë¶„ë¦¬](#4-ê´€ì‹¬ì‚¬-ë¶„ë¦¬)
  - [ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ 5ê°€ì§€ ì›ì¹™ì˜ ì ìš©](#ì¢‹ì€-ê°ì²´-ì§€í–¥-ì„¤ê³„ì˜-5ê°€ì§€-ì›ì¹™ì˜-ì ìš©)
    - [SRP(Single Responsiblilty Principle) ğŸ”—](#srpsingle-responsiblilty-principle-)
    - [DIP(Dependency Inversion Principle) ğŸ”—](#dipdependency-inversion-principle-)
    - [OCP(Open-Closed Prinicple) ğŸ”—](#ocpopen-closed-prinicple-)
  - [IoC(ì œì–´ì˜ ì—­ì „), DI(ì˜ì¡´ê´€ê³„ ì£¼ì…), ê·¸ë¦¬ê³  ì»¨í…Œì´ë„ˆ](#iocì œì–´ì˜-ì—­ì „-diì˜ì¡´ê´€ê³„-ì£¼ì…-ê·¸ë¦¬ê³ -ì»¨í…Œì´ë„ˆ)
    - [ì œì–´ì˜ ì—­ì „(Inversion of Control, IoC) ğŸ”—](#ì œì–´ì˜-ì—­ì „inversion-of-control-ioc-)
    - [ì˜ì¡´ê´€ê³„ ì£¼ì…(Dependency Injection, DI) ğŸ”—](#ì˜ì¡´ê´€ê³„-ì£¼ì…dependency-injection-di-)
    - [IoC ì»¨í…Œì´ë„ˆ, DI ì»¨í…Œì´ë„ˆ ğŸ”—](#ioc-ì»¨í…Œì´ë„ˆ-di-ì»¨í…Œì´ë„ˆ-)
- [5. ìŠ¤í”„ë§ìœ¼ë¡œ ì „í™˜](#5-ìŠ¤í”„ë§ìœ¼ë¡œ-ì „í™˜)
  - [ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ](#ìŠ¤í”„ë§-ì»¨í…Œì´ë„ˆ)
</details>

---
## IntelliJ ë‹¨ì¶•í‚¤ ì •ë¦¬
- `âŒ˜ + â‡§ + â`
  - ìë™ ì™„ì„±ê³¼ ë™ì‹œì— `;`ë¥¼ ì°ì–´ì¤Œ
- `âŒ˜ + â‡§ + T` 
  - í…ŒìŠ¤íŠ¸ ì½”ë“œ ìë™ ìƒì„±
- `âŒ˜ + âŒ¥ + V`
  - ë³€ìˆ˜ ì¶”ì¶œ
- `âŒ˜ + âŒ¥ + M`
  - ë©”ì†Œë“œ ì¶”ì¶œ
- `âŒ˜ + E`
  - ìµœê·¼ ì‚¬ìš©ëœ íŒŒì¼ë“¤ì„ ë³¼ ìˆ˜ ìˆìŒ
- `iter + â‡¥`
  - ë¦¬ìŠ¤íŠ¸ì™€ ê°™ì€ ë°°ì—´ë“¤ì˜ for ë¬¸ì„ ìë™ìœ¼ë¡œ ì™„ì„±ì‹œì¼œì¤Œ


## 1. íšŒì› ë„ë©”ì¸ ê°œë°œ
```java
// ì½”ë“œ1
public class MemberServiceImpl implements MemberService{

    private final MemberRepository memberRepository = new MemoryMemberRepository();
}
```
### `ì½”ë“œ1`ì˜ ë¬¸ì œì  ğŸ¤”
- íšŒì› ì €ì¥ì†Œë¥¼ í™•ì¥í•˜ë©´ íšŒì› ì„œë¹„ìŠ¤ êµ¬í˜„ì²´ ìˆ˜ì •ì´ í•„ìˆ˜ì ì´ë¯€ë¡œ **OCP** ìœ„ë°˜ 
- íšŒì› ì„œë¹„ìŠ¤ëŠ” ì¶”ìƒí™”ë„ ì˜ì¡´í•˜ê³  êµ¬í˜„ì²´ë„ ì˜ì¡´í•˜ê¸° ë•Œë¬¸ì— **DIP** ìœ„ë°˜

### TIL ğŸ’¡
- `enum`ì€ member entity ì— êµ¬í˜„í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ íŒŒì¼ì„ ë§Œë“¤ì–´ êµ¬í˜„

## 2. íšŒì› ë„ë©”ì¸ ì‹¤í–‰ê³¼ í…ŒìŠ¤íŠ¸
### ì• í”Œì¼€ì´ì…˜ ë¡œì§ì„ êµ¬í˜„ í›„ í…ŒìŠ¤íŠ¸
```java
public class MemberApp {

    public static void main(String[] args) {
        MemberService memberService = new MemberServiceImpl();
        Member member = new Member(1L, "memberA", Grade.VIP);
        memberService.join(member);

        Member findMember = memberService.findMember(1L);
        System.out.println("new member = " + member.getName());
        System.out.println("find Member = " + findMember.getName());
    }
}
```
- ì„œë¹„ìŠ¤ê°€ ì•„ì£¼ ì»¤ì§„ë‹¤ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ì„ ë©”ì¸ ë©”ì†Œë“œë¡œ í…ŒìŠ¤íŠ¸í•˜ëŠ”ë° í•œê³„ê°€ ì¡´ì¬í•¨

### `JUnit`ì„ ì´ìš©í•´ì„œ í…ŒìŠ¤íŠ¸ â—ï¸
```java
package hello.core.member;

import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.Test;

public class MemberServiceTest {

    MemberService memberService = new MemberServiceImpl();

    @Test
    void join() {
        // given
        Member member = new Member(1L, "MemberA", Grade.VIP);

        // when
        memberService.join(member);
        Member findMember = memberService.findMember(member.getId());

        // then
        Assertions.assertThat(member).isEqualTo(findMember);
    }
}
```
- **Given-When-Then** Pattern (ì¤€ë¹„ - ì‹¤í–‰ - ê²€ì¦)
  - `given`: ì¤€ë¹„í•˜ëŠ” ê³¼ì •
  - `when`: ì‹¤ì œë¡œ ì•¡ì…˜ì„ í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” ê³¼ì •
  - `then`: í…ŒìŠ¤íŠ¸ë¥¼ ê²€ì¦í•˜ëŠ” ê³¼ì •
- ê²€ì¦ì€ `assertj`ì˜ `Assertions`ë¥¼ ì‚¬ìš©
  - `assertThat`ê³¼ `isEqualTo`ê°€ ê°™ë‹¤ë©´ Run ì°½ì— ì´ˆë¡ë¶ˆì´ ë“¤ì–´ì˜¨ë‹¤
  - `assertThat`ê³¼ `isEqualTo`ê°€ ë‹¤ë¥´ê±°ë‚˜ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤ë©´ Run ì°½ì— ë¹¨ê°„ë¶ˆì´ ë“¤ì–´ì˜¨ë‹¤
  
~~Clean Code ì—ì„œ ë‹¤ë£¨ëŠ” ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì— ëŒ€í•œ ë‚´ìš©ì„ ë‹¤ì‹œ ì½ì–´ë´ì•¼ê² ë‹¤.~~

## 3. ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ê°œë°œ
```java
// ì½”ë“œ2
public interface DiscountPolicy {

    /**
     * @return í• ì¸ ëŒ€ìƒ ê¸ˆì•¡
     */
    int discount(Member member, int price);
}

public class FixDiscountPolicy implements DiscountPolicy {

    private int discountFixAmount = 1000;

    @Override
    public int discount(Member member, int price) {
        if (member.getGrade() == Grade.VIP) {
            return discountFixAmount;
        } else {
            return 0;
        }
    }
}


public class OrderServiceImpl implements OrderService {

    private final MemberRepository memberRepository = new MemoryMemberRepository();
    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
}
```
### `ì½”ë“œ2`ì˜ ì„¤ê³„
- `DiscountPolicy`ëŠ” í• ì¸ì— ê´€ë ¨ëœ ì±…ì„ë§Œ ê°€ì§€ê³  ìˆê³ , `OrderService`ëŠ” ì£¼ë¬¸ê³¼ ê´€ë ¨ëœ ì±…ì„ë§Œ ê°€ì§€ê³  ìˆë‹¤.   
  â‡’ ê° í´ë˜ìŠ¤ëŠ” í•œ ê°€ì§€ ì±…ì„ë§Œ ê°€ì§€ê³  ìˆê¸°ì— **SRP**ë¥¼ ì§€í‚¤ê³  ìˆë‹¤.
- í•˜ì§€ë§Œ `ì½”ë“œ1`ì™€ ê°™ì´ í™•ì¥ ëœë‹¤ë©´ **OCP**, **DIP**ë¥¼ ìœ„ë°˜í•œë‹¤.

## 4. ê´€ì‹¬ì‚¬ ë¶„ë¦¬
- ê¸°ì¡´ ì½”ë“œ
```java
public class MemberServiceImpl implements MemberService {

  private final MemberRepository memeberRepository = new MemboryMemberRespository();
}

public class OrderServiceImpl implements OrderService {

    private final MemberRepository memberRepository = new MemoryMemberRepository();
    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
}
```
- ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•œ ì½”ë“œ
```java
// AppConfig.java
package hello.core;

import hello.core.discount.RateDiscountPolicy;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;

public class AppConfig {

    public MemberService memberService() {
        return new MemberServiceImpl(new MemoryMemberRepository());
    }

    public OrderService orderService() {
        return new OrderServiceImpl(new MemoryMemberRepository(), new RateDiscountPolicy());
    }
}

// MemberServiceImpl.java
public class MemberServiceImpl implements MemberService {

    private final MemberRepository memberRepository;

    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
}

// OrderServiceImpl.java
public class OrderServiceImpl implements OrderService{

    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

    public OrderServiceImpl(MemberRepository memberRepository,
        DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }
}
```
- ìœ„ì™€ ê°™ì´ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•˜ë©´ ì¸í„°í˜ì´ìŠ¤ëŠ” ì¶”ìƒí™”ë§Œ ì˜ì¡´í•˜ê¸° ë•Œë¬¸ì— **DIP**ë¥¼ ë§Œì¡±í•œë‹¤.
- ë§Œì•½ í™•ì¥ì„ í•˜ë”ë¼ë„ ì˜ì¡´ì„± ì£¼ì…ìœ¼ë¡œ ì¸í•´ **ì‚¬ìš© ì˜ì—­**(í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ)ì€ ë³€ê²½ì—†ì´ **êµ¬ì„± ì—­ì—­**(`AppConfig`)ë§Œ ìˆ˜ì •í•˜ë©´ ë˜ë¯€ë¡œ **OCP**ë¥¼ ë§Œì¡±í•œë‹¤.
- í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ì˜ì¡´ê´€ê³„ì— ëŒ€í•œ ì±…ì„ì„ ëœê³  ê¸°ëŠ¥ì—ë§Œ ì±…ì„ì„ ê°€ì§„ë‹¤.

~~ì˜ì¡´ì„± ì£¼ì…ì„ ê³µë¶€í•œ í›„ ì •ë¦¬ í•„ìš”~~

### ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ 5ê°€ì§€ ì›ì¹™ì˜ ì ìš©
í˜„ì¬ê¹Œì§€ **SRP**, **DIP**, **OCP** ì ìš©

#### SRP(Single Responsiblilty Principle) ğŸ”—
**í•œ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì ¸ì•¼ í•œë‹¤.**
- í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ì§ì ‘ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ê³ , ì‹¤í–‰í•˜ëŠ” ë‹¤ì–‘í•œ ì±…ì„ì„ ê°€ì§€ê³  ìˆìŒ
- SRPë¥¼ ë”°ë¥´ë©´ì„œ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬
- êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ì±…ì„ì€ `AppConfig`ê°€ ë‹´ë‹¹
- í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ë‹´ë‹¹

#### DIP(Dependency Inversion Principle) ğŸ”—
**í”„ë¡œê·¸ë˜ë¨¸ëŠ” "ì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ì§€, êµ¬ì²´í™”ì— ì˜ì¡´í•˜ë©´ ì•ˆëœë‹¤." ì˜ì¡´ì„± ì£¼ì…ì€ ì´ ì›ì¹™ì„ ë”°ë¥´ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ë‹¤.**
- ê¸°ì¡´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ì¶”ìƒí™” ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ì§€ë§Œ, êµ¬ì²´í™” êµ¬í˜„ í´ë˜ìŠ¤ë„ í•¨ê»˜ ì˜ì¡´í–ˆìŒ
- ê´€ì‹¬ì‚¬ ë¶„ë¦¬ í›„ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ì¶”ìƒí™” ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´

#### OCP(Open-Closed Prinicple) ğŸ”—
**ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†ŒëŠ” í™•ì¥ì€ ì—´ë ¤ìˆê³  ë³€ê²½ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤.**
- ë‹¤í˜•ì„±ì„ ì‚¬ìš©í•˜ê³  í´ë¼ì´ì–¸íŠ¸ê°€ DIPë¥¼ ì§€í‚´
- ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚¬ìš© ì˜ì—­ê³¼ êµ¬ì„± ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆ”
- `AppConfig`ê°€ ì˜ì¡´ ê´€ê³„ë¥¼ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì£¼ì…í•˜ë¯€ë¡œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ë¨
- ë”°ë¼ì„œ **ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†Œë¥¼ ìƒˆë¡­ê²Œ í™•ì¥í•´ë„ ì‚¬ìš© ì—­ì˜ì˜ ë³€ê²½ì€ ë‹«í˜€ìˆë‹¤.**

### IoC(ì œì–´ì˜ ì—­ì „), DI(ì˜ì¡´ê´€ê³„ ì£¼ì…), ê·¸ë¦¬ê³  ì»¨í…Œì´ë„ˆ
#### ì œì–´ì˜ ì—­ì „(Inversion of Control, IoC) ğŸ”—
- ë¦¬íŒ©í† ë¦¬ì „ í”„ë¡œê·¸ë¨ì€ í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„ ê°ì²´ê°€ ìŠ¤ìŠ¤ë¡œ í•„ìš”í•œ ì„œë²„ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ê³  ì‹¤í–‰í•œë‹¤. ì¦‰, êµ¬í˜„ ê°ì²´ê°€ í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì„ ìŠ¤ìŠ¤ë¡œ ì¡°ì¢…í–ˆë‹¤.
- ê´€ì‹¬ì‚¬ ë¶„ë¦¬ í›„ êµ¬í˜„ ê°ì²´ëŠ” ìì‹ ì˜ ë¡œì§ë§Œ ìˆ˜í–‰í•˜ëŠ” ì—­í• ë§Œ ë‹´ë‹¹í•˜ê³ , í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì€ `AppConfig`ê°€ ê°€ì ¸ê°„ë‹¤.
- ì´ë ‡ë“¯ í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì„ ì§ì ‘ ì œì–´í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì™¸ë¶€ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ì œì–´ì˜ ì—­ì „(IoC)ë¼ í•œë‹¤.

**í”„ë ˆì„ì›Œí¬ vs ë¼ì´ë¸ŒëŸ¬ë¦¬**
- í”„ë ˆì„ì›Œí¬ê°€ í”„ë¡œê·¸ë˜ë¨¸ê°€ ì‘ì„±í•œ ì½”ë“œë¥¼ ì œì–´í•˜ê³ , ëŒ€ì‹  ì‹¤í–‰í•˜ë©´ ê·¸ê²ƒì€ í”„ë ˆì„ì›Œí¬ë‹¤. ex) JUnit
- í”„ë¡œê·¸ë˜ë¨¸ê°€ ì‘ì„±í•œ ì½”ë“œë¥¼ ì§ì ‘ ì œì–´ì˜ íë¦„ì„ ë‹´ë‹¹í•œë‹¤ë©´, ê·¸ê²ƒì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‹¤.

#### ì˜ì¡´ê´€ê³„ ì£¼ì…(Dependency Injection, DI) ğŸ”—
- `OrderServiceImpl`ì€ `DiscountPolicy` ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•œë‹¤. ì‹¤ì œ ì–´ë–¤ êµ¬í˜„ ê°ì²´ê°€ ì‚¬ìš©ë ì§€ëŠ” ëª¨ë¦„
- ì˜ì¡´ê´€ê³„ëŠ” **ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ ê´€ê³„ì™€ ì‹¤í–‰ ì‹œì ì—ëŠ” ê²°ì •ë˜ëŠ” ë™ì ì¸ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ ê´€ê³„** ë‘˜ì„ ë¶„ë¦¬í•´ì„œ ìƒê°í•´ì•¼ í•¨

**ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ ê´€ê³„**   
í´ë˜ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” `import` ì½”ë“œë§Œ ë³´ê³  ì˜ì¡´ ê´€ê³„ë¥¼ ì‰½ê²Œ íŒë‹¨í•  ìˆ˜ ìˆë‹¤. ì •ì ì¸ ì˜ì¡´ ê´€ê³„ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ì§€ ì•Šì•„ë„ ë¶„ì„í•  ìˆ˜ ìˆë‹¤.

í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

<img width="530" alt="image" src="https://user-images.githubusercontent.com/45463495/156312530-35a6faef-4fd8-4d86-9e67-1cc8e1d21483.png">

- `OrderServiceImpl`ì€ `MemberRepository`, `DiscountPolicy`ì— ì˜ì¡´í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŒ
- í•˜ì§€ë§Œ ì´ëŸ¬í•œ í´ë˜ìŠ¤ ì˜ì¡´ ê´€ê³„ë§Œìœ¼ë¡œëŠ” ì‹¤ì œ ì–´ë–¤ ê°ì²´ê°€ `OrderServiceImpl`ì— ì£¼ì…ë ì§€ ì•Œ ìˆ˜ ì—†ìŒ

**ë™ì ì¸ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ ê´€ê³„**   
ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì ì— ì‹¤ì œ ìƒì„±ëœ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡°ê°€ ì—°ê²°ëœ ì˜ì¡´ ê´€ê³„

ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨

<img width="530" alt="image" src="https://user-images.githubusercontent.com/45463495/156313379-20e8c597-42dd-45e6-990a-f1fec811827e.png">

- ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì ì— ì™¸ë¶€ì—ì„œ ì‹¤ì œ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•´ì„œ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ ì‹¤ì œ ì˜ì¡´ ê´€ê³„ê°€ ì—°ê²°ë˜ëŠ” ê²ƒì„ **ì˜ì¡´ê´€ê³„ ì£¼ì…**ì´ë¼ í•œë‹¤.
- ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ , í´ë¼ì´ì–¸íŠ¸ê°€ í˜¸ì¶œí•˜ëŠ” ëŒ€ìƒì˜ íƒ€ì… ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë³€ê²½ ê°€ëŠ¥
- ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ **ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ , ë™ì ì¸ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ê´€ê³„ë¥¼ ì‰½ê²Œ ë³€ê²½ ê°€ëŠ¥**

#### IoC ì»¨í…Œì´ë„ˆ, DI ì»¨í…Œì´ë„ˆ ğŸ”—
- `AppConfig`ì²˜ëŸ¼ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ë©´ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì—°ê²°í•´ì£¼ëŠ” ê²ƒì„ IoC ì»¨í…Œì´ë„ˆ, **DI ì»¨í…Œì´ë„ˆ**ë¼ í•œë‹¤.
- ì˜ì¡´ê´€ê³„ ì£¼ì…ì— ì´ˆì ì„ ë§ì¶° ìµœê·¼ì—ëŠ” ì£¼ë¡œ DI ì»¨í…Œì´ë„ˆë¼ í•œë‹¤.

## 5. ìŠ¤í”„ë§ìœ¼ë¡œ ì „í™˜
```java
@Configuration
public class AppConfig {

    @Bean
    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    @Bean
    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    @Bean
    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    @Bean
    public DiscountPolicy discountPolicy() {
        return new RateDiscountPolicy();
    }
}

```
- `AppConfig`ì— ì„¤ì •ì„ êµ¬ì„±í•œë‹¤ëŠ” ëœ»ì˜ `@Configuration`ì„ ë¶™ì—¬ì¤Œ
- ê° ë©”ì„œë“œì— `@Bean`ì„ ë¶™ì—¬ì¤Œ -> ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡

### ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ
- `ApplicationContext`ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ í•œë‹¤.
- ê¸°ì¡´ì—ëŠ” ê°œë°œìê°€ `AppConfig`ë¥¼ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì˜ì¡´ì„±ì„ ì£¼ì…í–ˆì§€ë§Œ, ì´ì œë¶€í„° ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ì„œ ì‚¬ìš©í•œë‹¤.
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” `@Configuration`ì´ ë¶™ì€ `AppConfig`ë¥¼ êµ¬ì„± ì •ë³´ë¡œ ì‚¬ìš©
- `@Bean`ì´ë¼ ì íŒ ë©”ì„œë“œë¥¼ ëª¨ë‘ í˜¸ì¶œí•˜ì—¬ ë°˜í™˜ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ë“±ë¡í•œë‹¤. ì´ë ‡ê²Œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆì´ë¼ í•¨

**ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ìƒì„± ê³¼ì •**

1. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±
```java
ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
```
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ë•ŒëŠ” êµ¬ì„± ì •ë³´ë¥¼ ì§€ì •í•´ì£¼ì–´ì•¼ í•¨

2. ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡
![](https://user-images.githubusercontent.com/45463495/156500577-f15e775b-b7e5-46b6-8181-9213b88b303b.png)   
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” íŒŒë¼ë¯¸ë”ë¡œ ë„˜ì–´ì˜¨ ì„¤ì • í´ë˜ìŠ¤ ì •ë³´ë¥¼ ì‚¬ìš©í•´ì„œ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡

ğŸ’¡ ë¹ˆ ì´ë¦„
- ë©”ì„œë“œ ì´ë¦„ì„ ì‚¬ìš©
- ì§ì ‘ ë¶€ì—¬ ê°€ëŠ¥
  - `@Bean(name="ms")`
- ë¹ˆ ì´ë¦„ì€ í•­ìƒ ë‹¤ë¥¸ ì´ë¦„ì„ ë¶€ì—¬í•´ì•¼ í•¨

3. ìŠ¤í”„ë§ ë¹ˆ ì˜ì¡´ê´€ê³„ ì„¤ì •

ì¤€ë¹„|ì™„ë£Œ
:--:|:--:
![image](https://user-images.githubusercontent.com/45463495/156500909-a5ff20f2-1d0f-456c-a1cb-d07b39549737.png)|![image](https://user-images.githubusercontent.com/45463495/156500969-981c546e-330b-47e1-8fa7-b6a7465a78cd.png)
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì„¤ì • ì •ë³´ë¥¼ ì°¸ê³ í•´ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…

**ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì¡°íšŒ**
```java
AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);

@Test
@DisplayName("ëª¨ë“  ë¹ˆ ì¶œë ¥")
void findAllBean() {
    String[] beanDefinitionNames = ac.getBeanDefinitionNames();
    for (String beanDefinitionName : beanDefinitionNames) {
        Object bean = ac.getBean(beanDefinitionName);
        System.out.println("name = " + beanDefinitionName + " Object = " + bean);
    }
}

@Test
@DisplayName("ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ì¶œë ¥")
void findApplicationBean() {
    String[] beanDefinitionNames = ac.getBeanDefinitionNames();
    for (String beanDefinitionName : beanDefinitionNames) {
        BeanDefinition beanDefinition = ac.getBeanDefinition(beanDefinitionName);

        if (beanDefinition.getRole() == BeanDefinition.ROLE_APPLICATION) {
            Object bean = ac.getBean(beanDefinitionName);
            System.out.println("name = " + beanDefinitionName + " Object = " + bean);
        }
    }
}

@Test
@DisplayName("ë¹ˆ ì´ë¦„ì„ ì¡°íšŒ")
void findBeanByName() {
    MemberService memberService = ac.getBean("memberService", MemberService.class);
    assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
}

@Test
@DisplayName("íƒ€ì…ìœ¼ë¡œë§Œ ì¡°íšŒ")
void findBeanByType() {
    MemberService memberService = ac.getBean(MemberService.class);
    assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
}

@Test
@DisplayName("êµ¬ì²´ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ")
void findBeanByName2() {
    MemberService memberService = ac.getBean("memberService", MemberServiceImpl.class);
    assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
}

@Test
@DisplayName("ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì¡°íšŒX")
void findBeanByNameX() {
    // MemberService xxx = ac.getBean("xxx", MemberService.class);
    assertThrows(NoSuchBeanDefinitionException.class,
        () -> ac.getBean("xxx", MemberService.class));
}

@Test
@DisplayName("íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ ì‹œ ê°™ì€ íƒ€ì…ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ì¤‘ë³µ ì˜¤ë¥˜ ë°œìƒ")
void findBeanByTypeDuplicate() {
//        ac.getBean(MemberRepository.class);
    assertThrows(NoUniqueBeanDefinitionException.class, () -> ac.getBean(MemberRepository.class));
}

@Test
@DisplayName("íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ ì‹œ ê°™ì€ íƒ€ì…ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ë¹ˆ ì´ë¦„ì„ ì§€ì •í•˜ë©´ ëœë‹¤")
void findBeanByName() {
    MemberRepository memberRepository = ac.getBean("memberRepository1",
        MemberRepository.class);
    assertThat(memberRepository).isInstanceOf(MemberRepository.class);
}

@Test
@DisplayName("íŠ¹ì • íƒ€ì… ëª¨ë‘ ì¡°íšŒí•˜ê¸°")
void findAllBeanByType() {
    Map<String, MemberRepository> beansOfType = ac.getBeansOfType(MemberRepository.class);
    for (String key : beansOfType.keySet()) {
        System.out.println("key = " + key + " value = " + beansOfType.get(key));
    }
    System.out.println("beansOfType = " + beansOfType);
    assertThat(beansOfType.size()).isEqualTo(2);
}

@Configuration
static class SameBeanConfig {

    @Bean
    public MemberRepository memberRepository1() {
        return new MemoryMemberRepository();
    }

    @Bean
    public MemberRepository memberRepository2() {
        return new MemoryMemberRepository();
    }

}
```
- ëª¨ë“  ë¹ˆ ì¶œë ¥
  - ìŠ¤í”„ë§ì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì •ë³´ë¥¼ ì¶œë ¥
  - `getBeanDefinitionNames()` : ìŠ¤í”„ë§ì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì´ë¦„ ì¡°íšŒ
  - `getBean()` : ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë¹ˆ ê°ì²´(ì¸ìŠ¤í„´ìŠ¤) ì¡°íšŒ
- ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ì¶œë ¥
  - `getRole()` : ìŠ¤í”„ë§ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆì„ êµ¬ë¶„
    - `ROLE_APPLICATION` : ì‚¬ìš©ìê°€ ì •ì˜í•œ ë¹ˆ
    - `ROLE_INFRASTRUCTURE` : ìŠ¤í”„ë§ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆ
- ë™ì¼í•œ íƒ€ì…ì´ ë‘ ê°œì´ìƒì¼ ê²½ìš°
  - `getBeansOfType()` ì‚¬ìš©
    - í•´ë‹¹ íƒ€ì…ì— ëª¨ë“  ë¹ˆì„ ì¡°íšŒí•  ìˆ˜ ìˆìŒ